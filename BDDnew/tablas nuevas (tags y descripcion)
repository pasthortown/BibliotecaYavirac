CREATE DATABASE Biblioteca DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;

use Biblioteca;

CREATE TABLE Solicitud (
  id INT NOT NULL AUTO_INCREMENT ,
  idPersona INT NOT NULL,
  fechaSolicitud DATETIME NOT NULL ,
  fechaMax DATETIME NOT NULL,
  fechaDevolucion DATETIME NULL,
  PRIMARY KEY (id)
);

CREATE TABLE RecursoDigital (
  id INT NOT NULL AUTO_INCREMENT,
  idRecurso INT NOT NULL,
  contenido LONGBLOB NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE DetalleSolicitud (
  id INT NOT NULL AUTO_INCREMENT,
  idSolicitud INT NOT NULL,
  idRecurso INT NOT NULL,
  PRIMARY KEY (id)
) ;

CREATE TABLE Recurso (
  id INT NOT NULL AUTO_INCREMENT,
  idTipo INT NOT NULL,
  idAutor INT NULL,
  idCategoria INT NULL,
  idProductora INT NULL,
  idTags INT NULL,
  idDescripcion INT NULL,
  titulo varchar(100) NOT NULL,
  codigoISBN VARCHAR(25) NULL,
  observaciones TEXT NULL,
  idEstado INT NULL,
  PRIMARY KEY (id));

CREATE TABLE Productora (
  id INT NOT NULL AUTO_INCREMENT,
  nombre VARCHAR(100) NOT NULL,
  urlWeb VARCHAR(300) NULL,
  PRIMARY KEY (id));


CREATE TABLE EstadoRecurso (
  id INT NOT NULL AUTO_INCREMENT,
  descripcion VARCHAR(50) NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE CategoriaRecurso (
  id INT NOT NULL AUTO_INCREMENT,
  codigo VARCHAR(20) NOT NULL,
  descripcion VARCHAR(100) NOT NULL,
  codigoPadre VARCHAR(20) NULL,
  PRIMARY KEY (id)
);

CREATE TABLE Autor (
  id INT NOT NULL AUTO_INCREMENT,
  nombres VARCHAR(50) NULL,
  apellidos VARCHAR(50) NULL,
  urlWeb VARCHAR(300) NULL,
  PRIMARY KEY (id)
) ;

CREATE TABLE TipoRecurso (
  id INT NOT NULL AUTO_INCREMENT,
  descripcion VARCHAR(50) NOT NULL,
  PRIMARY KEY (id)
) ;

CREATE TABLE ComentariosSugerencias (
  id INT NOT NULL AUTO_INCREMENT,
  idPersona INT NOT NULL,
  idRecurso INT NOT NULL,
  fecha DATETIME NOT NULL,
  contenido TEXT NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE Tags (
  id INT NOT NULL AUTO_INCREMENT,
  palabraClave INT NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE Descripcion (
  id INT NOT NULL AUTO_INCREMENT,
  descripcion TEXT NULL,
  tablaContenidos TEXT NULL,
  PRIMARY KEY(id) 
);
